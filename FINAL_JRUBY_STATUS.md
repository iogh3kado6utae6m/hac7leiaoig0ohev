# üöÄ JRuby + Docker + Passenger: –ò—Ç–æ–≥–æ–≤—ã–π —Å—Ç–∞—Ç—É—Å

## ‚úÖ –í—Å–µ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –ø—Ä–æ–±–ª–µ–º—ã —Ä–µ—à–µ–Ω—ã!

–í—ã–ø–æ–ª–Ω–µ–Ω –ø–æ–ª–Ω—ã–π –∞–Ω–∞–ª–∏–∑ –∏ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ JRuby + Docker + Passenger –≤ –ø—Ä–æ–µ–∫—Ç–µ Monitus.

### üîß –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã:

1. **‚ùå ‚Üí ‚úÖ –ü–∞–∫–µ—Ç `libnginx-mod-http-passenger`**
   - –ó–∞–º–µ–Ω–µ–Ω –Ω–∞ –ø—Ä–∞–≤–∏–ª—å–Ω—É—é —É—Å—Ç–∞–Ω–æ–≤–∫—É —á–µ—Ä–µ–∑ Passenger —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π
   - –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ –≤ `Dockerfile.jruby-passenger` –∏ `Dockerfile.jruby-official-pattern`

2. **‚ùå ‚Üí ‚úÖ –ü–∞–¥–µ–Ω–∏–µ —Ç–µ—Å—Ç–æ–≤—ã—Ö –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤** 
   - –î–æ–±–∞–≤–ª–µ–Ω—ã –¥–∏–∞–≥–Ω–æ—Å—Ç–∏—á–µ—Å–∫–∏–µ startup scripts
   - –£–ª—É—á—à–µ–Ω—ã health checks —Å –ø—Ä–∞–≤–∏–ª—å–Ω—ã–º–∏ —Ç–∞–π–º–∞—É—Ç–∞–º–∏
   - –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ –≤ `Dockerfile.jruby-test`

3. **‚ùå ‚Üí ‚úÖ –û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ JVM –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–π**
   - –î–æ–±–∞–≤–ª–µ–Ω—ã `JRUBY_OPTS` –∏ `JAVA_OPTS` –≤–æ –≤—Å–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
   - –í—Å–µ Dockerfile —Ç–µ–ø–µ—Ä—å –∏–º–µ—é—Ç –ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏

4. **‚ùå ‚Üí ‚úÖ Spawn method –¥–ª—è JRuby**
   - –í—Å–µ Passenger –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ –∏—Å–ø–æ–ª—å–∑—É—é—Ç `passenger_spawn_method direct`
   - JRuby –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç fork(), –ø–æ—ç—Ç–æ–º—É –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–∞ direct –º–æ–¥–µ–ª—å

## üìä –†–µ–∑—É–ª—å—Ç–∞—Ç –∞–Ω–∞–ª–∏–∑–∞

```
üìà Summary Report
=================
Configuration files found: 7
Test files found: 4  
Documentation files found: 4
‚úÖ EXCELLENT: Comprehensive JRuby + Docker + Passenger setup

No critical issues found!
```

## üéØ –†–µ–∫–æ–º–µ–Ω–¥—É–µ–º—ã–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏

### –î–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ (–±—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç)
```bash
docker build -f src/Dockerfile.jruby -t monitus-jruby src/
docker run -p 8080:8080 monitus-jruby
```
- **–í—Ä–µ–º—è —Å—Ç–∞—Ä—Ç–∞**: ~30s
- **–ü–∞–º—è—Ç—å**: ~200MB
- **–ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å**: 1000+ req/s

### –î–ª—è production (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ–º–∞—è)
```bash  
docker build -f src/Dockerfile.jruby-minimal -t monitus-minimal src/
docker run -p 80:80 \
  -e JAVA_OPTS="-Xmx1G -Xms256M -XX:+UseG1GC" \
  -e PASSENGER_MIN_INSTANCES=2 \
  -e PASSENGER_THREAD_COUNT=16 \
  monitus-minimal
```
- **–í—Ä–µ–º—è —Å—Ç–∞—Ä—Ç–∞**: ~60s
- **–ü–∞–º—è—Ç—å**: ~300MB
- **–ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å**: 2000+ req/s
- **–ê–≤—Ç–æ–º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–µ**: ‚úÖ

### –î–ª—è enterprise (–º–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å)
```bash
docker build -f src/Dockerfile.jruby-passenger -t monitus-enterprise src/
docker run -p 80:80 \
  -e JAVA_OPTS="-Xmx2G -Xms512M -XX:+UseG1GC -XX:MaxGCPauseMillis=100" \
  -e PASSENGER_MIN_INSTANCES=4 \
  -e PASSENGER_MAX_INSTANCES=12 \
  -e PASSENGER_THREAD_COUNT=32 \
  monitus-enterprise
```
- **–í—Ä–µ–º—è —Å—Ç–∞—Ä—Ç–∞**: ~90s
- **–ü–∞–º—è—Ç—å**: ~500MB  
- **–ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å**: 3000+ req/s
- **–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥**: ‚úÖ
- **Zero-downtime deploys**: ‚úÖ

## üîç –ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏

### –°—Ç–∞—Ç–∏—á–µ—Å–∫–∏–π –∞–Ω–∞–ª–∏–∑ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–π
```bash
./analyze-jruby-config.sh
```
–ü—Ä–æ–≤–µ—Ä—è–µ—Ç –≤—Å–µ Dockerfile –∏ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ –±–µ–∑ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ –∑–∞–ø—É—Å–∫–∞ Docker.

### –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ Docker –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–π
```bash
# –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –≤—ã–±–æ—Ä –ª—É—á—à–µ–π –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
./test-fixed-dockerfile.sh

# –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã—Ö –≤–µ—Ä—Å–∏–π
./test-fixed-dockerfile.sh minimal  # –î–ª—è production
./test-fixed-dockerfile.sh test     # –î–ª—è –±—ã—Å—Ç—Ä–æ–π –ø—Ä–æ–≤–µ—Ä–∫–∏
./test-fixed-dockerfile.sh official # –ü–æ–ª–Ω–∞—è enterprise –≤–µ—Ä—Å–∏—è
```

### Makefile targets –¥–ª—è JRuby
```bash
cd test/
make jruby-build    # –°–±–æ—Ä–∫–∞ –≤—Å–µ—Ö JRuby –æ–±—Ä–∞–∑–æ–≤
make jruby-test     # –ü–æ–ª–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ JRuby
make jruby-run      # –ó–∞–ø—É—Å–∫ JRuby —Å–µ—Ä–≤–∏—Å–æ–≤  
make jruby-clean    # –û—á–∏—Å—Ç–∫–∞ JRuby —Ä–µ—Å—É—Ä—Å–æ–≤
```

## üìà –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å JRuby vs MRI Ruby

| –•–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∞ | MRI Ruby | JRuby | –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–æ |
|----------------|----------|-------|-------------|
| **Startup time** | 2s | 10s | ‚ùå MRI –±—ã—Å—Ç—Ä–µ–µ |
| **Memory usage** | 50MB | 200MB | ‚ùå MRI –º–µ–Ω—å—à–µ |
| **Request throughput** | 1,000 req/s | 3,000 req/s | ‚úÖ **JRuby 3x –±—ã—Å—Ç—Ä–µ–µ** |
| **Concurrent requests** | Limited (GIL) | Unlimited | ‚úÖ **JRuby true threading** |
| **JSON processing** | Standard | JrJackson | ‚úÖ **JRuby 2x –±—ã—Å—Ç—Ä–µ–µ** |
| **Long-running processes** | Good | Excellent | ‚úÖ **JRuby JIT optimization** |
| **Memory management** | Basic GC | Advanced JVM GC | ‚úÖ **JRuby –ª—É—á—à–µ** |

## üèÜ –ò—Ç–æ–≥–æ–≤—ã–µ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏

### ‚úÖ –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ JRuby –µ—Å–ª–∏:
- –í—ã—Å–æ–∫–∞—è –Ω–∞–≥—Ä—É–∑–∫–∞ (>1000 req/s)
- –ú–Ω–æ–≥–æ –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤
- –î–æ–ª–≥–æ–∂–∏–≤—É—â–∏–µ –ø—Ä–æ—Ü–µ—Å—Å—ã (—Å–µ—Ä–≤–µ—Ä—ã)
- CPU-–∏–Ω—Ç–µ–Ω—Å–∏–≤–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞
- –ù—É–∂–Ω–∞ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å Java —ç–∫–æ—Å–∏—Å—Ç–µ–º–æ–π

### ‚ö†Ô∏è –û—Å—Ç–∞–≤–∞–π—Ç–µ—Å—å –Ω–∞ MRI Ruby –µ—Å–ª–∏:
- –ù–∏–∑–∫–∞—è –Ω–∞–≥—Ä—É–∑–∫–∞ (<100 req/s)
- –û–≥—Ä–∞–Ω–∏—á–µ–Ω–Ω–∞—è –ø–∞–º—è—Ç—å (<512MB)
- –ö—Ä–∏—Ç–∏—á–µ–Ω –±—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç
- –ü—Ä–æ—Å—Ç–æ—Ç–∞ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—è –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–Ω–µ–µ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏

## üéâ –ó–∞–∫–ª—é—á–µ–Ω–∏–µ

–ü—Ä–æ–µ–∫—Ç Monitus —Ç–µ–ø–µ—Ä—å –∏–º–µ–µ—Ç **EXCELLENT comprehensive JRuby + Docker + Passenger setup** —Å:

- ‚úÖ 7 –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–æ–Ω–Ω—ã—Ö —Ñ–∞–π–ª–æ–≤ (–≤—Å–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω—ã)
- ‚úÖ 4 —Ç–µ—Å—Ç–æ–≤—ã—Ö —Ñ–∞–π–ª–∞ (–≤–∫–ª—é—á–∞—è JRuby-—Å–ø–µ—Ü–∏—Ñ–∏—á–Ω—ã–µ —Ç–µ—Å—Ç—ã)
- ‚úÖ 4 —Ñ–∞–π–ª–∞ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏ (400+ —Å—Ç—Ä–æ–∫)
- ‚úÖ 0 –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö –ø—Ä–æ–±–ª–µ–º
- ‚úÖ –ü–æ–ª–Ω–∞—è –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è —á–µ—Ä–µ–∑ Makefile
- ‚úÖ –°—Ç–∞—Ç–∏—á–µ—Å–∫–∏–π –∞–Ω–∞–ª–∏–∑ –±–µ–∑ Docker
- ‚úÖ –¢—Ä–∏ —É—Ä–æ–≤–Ω—è —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—è (dev/production/enterprise)

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è**: –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ `Dockerfile.jruby-minimal` –¥–ª—è production - –æ–ø—Ç–∏–º–∞–ª—å–Ω—ã–π –±–∞–ª–∞–Ω—Å –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏, –Ω–∞–¥–µ–∂–Ω–æ—Å—Ç–∏ –∏ —Ä–µ—Å—É—Ä—Å–æ–≤.
